{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _core = require(\"@emotion/core\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactFastCompare = _interopRequireDefault(require(\"react-fast-compare\"));\n\nvar _memoizeOne = _interopRequireDefault(require(\"memoize-one\"));\n\nvar _scrollIntoViewIfNeeded = _interopRequireDefault(require(\"scroll-into-view-if-needed\"));\n\nvar _utils = require(\"../utils\");\n\nvar _Menu = _interopRequireWildcard(require(\"../Menu/Menu\"));\n\nvar _MenuItem = _interopRequireDefault(require(\"../Menu/MenuItem\"));\n\nvar _Popover = _interopRequireDefault(require(\"../Popover\"));\n\nvar _constants = require(\"./constants\");\n\nvar _DropdownContent = _interopRequireDefault(require(\"./DropdownContent\"));\n\nvar _ItemMatcher = _interopRequireDefault(require(\"./ItemMatcher\"));\n\nvar _propTypes = require(\"./propTypes\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Dropdown =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Dropdown, _Component);\n\n  function Dropdown() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      highlightedIndex: _this.props.defaultHighlightedIndex,\n      isOpen: Boolean(_this.props.defaultIsOpen)\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"dropdownTrigger\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"highlightedItemId\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"id\", _this.props.id || \"dropdown-\" + (0, _utils.generateId)());\n\n    _defineProperty(_assertThisInitialized(_this), \"itemMatcher\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"items\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"getItems\", (0, _memoizeOne.default)(_Menu.getItems, _reactFastCompare.default));\n\n    _defineProperty(_assertThisInitialized(_this), \"getStateAndHelpers\", function () {\n      return {\n        state: {\n          highlightedIndex: _this.getControllableValue('highlightedIndex'),\n          isOpen: _this.getControllableValue('isOpen')\n        },\n        helpers: {\n          close: _this.close,\n          focusTrigger: _this.focusTrigger,\n          open: _this.open\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setTriggerRef\", function (node) {\n      _this.dropdownTrigger = node;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getContentProps\", function (props) {\n      if (props === void 0) {\n        props = {};\n      }\n\n      var _props = props,\n          ignoreSubtitle = _props.subtitle,\n          ignoreTitle = _props.title,\n          ignoreTabIndex = _props.tabIndex,\n          restProps = _objectWithoutPropertiesLoose(_props, [\"subtitle\", \"title\", \"tabIndex\"]);\n\n      var _this$props = _this.props,\n          modifiers = _this$props.modifiers,\n          placement = _this$props.placement,\n          positionFixed = _this$props.positionFixed,\n          wide = _this$props.wide;\n      return _objectSpread({}, restProps, {\n        children: _this.renderMenu(),\n        id: _this.getContentId(),\n        modifiers: modifiers,\n        placement: placement,\n        positionFixed: positionFixed,\n        wide: wide\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderContent\", function (_temp) {\n      var _ref = _temp === void 0 ? {} : _temp,\n          props = _ref.props;\n\n      return (0, _core.jsx)(_DropdownContent.default, _this.getContentProps(props));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getContentId\", function () {\n      return _this.id + \"-content\";\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMenuId\", function () {\n      return _this.id + \"-menu\";\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMenuItemId\", function (index) {\n      return _this.id + \"-item-\" + index;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTriggerProps\", function (props) {\n      if (props === void 0) {\n        props = {};\n      }\n\n      var isOpen = _this.getControllableValue('isOpen');\n\n      var contentId = _this.getContentId();\n\n      var children = _this.props.children;\n      return _objectSpread({}, (0, _utils.isRenderProp)(children) ? props : {}, isOpen ? {\n        'aria-activedescendant': _this.getHighlightedItemId() || _this.getMenuId()\n      } : {}, {\n        'aria-describedby': contentId,\n        'aria-haspopup': true,\n        'aria-owns': contentId\n      }, !(0, _utils.isRenderProp)(children) ? props : {}, {\n        onKeyDown: (0, _utils.composeEventHandlers)(props.onKeyDown, _this.onTriggerKeyDown),\n        onKeyUp: (0, _utils.composeEventHandlers)(props.onKeyUp, _this.onTriggerKeyUp)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderTrigger\", function (_temp2) {\n      var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          props = _ref2.props;\n\n      var children = _this.props.children;\n\n      if ((0, _utils.isRenderProp)(children)) {\n        return children(_objectSpread({}, _this.getStateAndHelpers(), {\n          props: _this.getTriggerProps(props)\n        }));\n      }\n\n      var child = _react.Children.only(children);\n\n      return (0, _react.cloneElement)(child, _this.getTriggerProps(child.props));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMenuProps\", function (props) {\n      if (props === void 0) {\n        props = {};\n      }\n\n      var _this$props2 = _this.props,\n          data = _this$props2.data,\n          itemKey = _this$props2.itemKey;\n      return _objectSpread({}, props, {\n        id: _this.getMenuId(),\n        itemKey: itemKey,\n        data: data,\n        highlightedIndex: _this.getControllableValue('highlightedIndex'),\n        item: _this.renderItem,\n        role: 'menu'\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderMenu\", function (_temp3) {\n      var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          props = _ref3.props;\n\n      var menu = _this.props.menu;\n\n      if ((0, _utils.isRenderProp)(menu)) {\n        return menu(_objectSpread({}, _this.getStateAndHelpers(), {\n          props: _this.getMenuProps(props)\n        }));\n      }\n\n      return (0, _core.jsx)(_Menu.default, _this.getMenuProps(props));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getItemProps\", function (props) {\n      if (props === void 0) {\n        props = {};\n      }\n\n      var highlightedIndex = _this.getControllableValue('highlightedIndex');\n\n      var _props2 = props,\n          itemProps = _props2.props;\n      var index = itemProps.index,\n          item = itemProps.item;\n      return _objectSpread({}, itemProps, item, {\n        'aria-disabled': _this.props.disabled || item.disabled,\n        children: item.text,\n        id: _this.getMenuItemId(index),\n        isHighlighted: highlightedIndex === index,\n        role: 'menuitem',\n        tabIndex: null,\n        // Unset tabIndex because we use arrow keys to navigate instead\n        onClick: (0, _utils.composeEventHandlers)(item.onClick, _this.onItemClick)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderItem\", function (props) {\n      if (props === void 0) {\n        props = {};\n      }\n\n      var item = _this.props.item;\n\n      if ((0, _utils.isRenderProp)(item)) {\n        return item(_objectSpread({}, props, _this.getStateAndHelpers(), {\n          props: _this.getItemProps(props)\n        }));\n      }\n\n      return (0, _core.jsx)(_MenuItem.default, _this.getItemProps(props));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getHighlightedItemId\", function () {\n      var highlightedIndex = _this.getControllableValue('highlightedIndex');\n\n      return highlightedIndex !== undefined && highlightedIndex !== null ? _this.getMenuItemId(highlightedIndex) : undefined;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hasHighlightedIndex\", function () {\n      return _this.getControllableValue('highlightedIndex') != undefined;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTriggerKeyUp\", function (event) {\n      // Prevent Firefox from triggering Popover's onClick handler when\n      // space key is used to activate trigger.\n      // See: https://bugzilla.mozilla.org/show_bug.cgi?id=501496\n      event.key === ' ' && event.preventDefault();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTriggerKeyDown\", function (event) {\n      var key = event.key;\n\n      var isOpen = _this.getControllableValue('isOpen');\n\n      if (key === 'ArrowUp') {\n        event.preventDefault();\n\n        _this.highlightPreviousItem();\n\n        !isOpen && _this.open(event);\n      } else if (key === 'ArrowDown') {\n        event.preventDefault();\n\n        _this.highlightNextItem();\n\n        !isOpen && _this.open(event);\n      } else if (key === 'Home' && isOpen) {\n        event.preventDefault();\n\n        _this.highlightItemAtIndex(0);\n      } else if (key === 'End' && isOpen) {\n        event.preventDefault();\n\n        _this.highlightItemAtIndex(_this.items.length - 1);\n      } else if (key === 'Enter' || key === ' ') {\n        event.preventDefault();\n        isOpen ? _this.hasHighlightedIndex() ? _this.clickHighlightedItem() : _this.close(event) : _this.open(event);\n      } else if (isOpen) {\n        _this.highlightItemMatchingKey(key);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"findItemMatchingKey\", function (key) {\n      _this.itemMatcher = _this.itemMatcher || new _ItemMatcher.default();\n      return _this.itemMatcher.findMatchingItem(_this.items, _this.getControllableValue('highlightedIndex'), key);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"highlightItemMatchingKey\", function (key) {\n      var matchingItem = _this.findItemMatchingKey(key);\n\n      matchingItem && _this.highlightItemAtIndex(_this.items.indexOf(matchingItem));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"highlightItemAtIndex\", function (index) {\n      if (!_this.isControlled('highlightedIndex')) {\n        _this.setState({\n          highlightedIndex: index\n        }, _this.scrollHighlightedItemIntoViewIfNeeded);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"highlightNextItem\", function () {\n      if (!_this.isControlled('highlightedIndex')) {\n        _this.setState(function (prevState) {\n          return {\n            highlightedIndex: prevState.highlightedIndex === null || prevState.highlightedIndex === undefined || prevState.highlightedIndex === _this.items.length - 1 ? 0 : prevState.highlightedIndex + 1\n          };\n        }, _this.scrollHighlightedItemIntoViewIfNeeded);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"highlightPreviousItem\", function () {\n      if (!_this.isControlled('highlightedIndex')) {\n        _this.setState(function (prevState) {\n          return {\n            highlightedIndex: !prevState.highlightedIndex ? _this.items.length - 1 : prevState.highlightedIndex - 1\n          };\n        }, _this.scrollHighlightedItemIntoViewIfNeeded);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"scrollHighlightedItemIntoViewIfNeeded\", function () {\n      var boundary = global.document.getElementById(_this.getContentId());\n      var highlightedItemNode = boundary && global.document.getElementById(_this.getHighlightedItemId());\n\n      if (highlightedItemNode) {\n        (0, _scrollIntoViewIfNeeded.default)(highlightedItemNode, {\n          boundary: boundary\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clickHighlightedItem\", function () {\n      var highlightedItemNode = global.document.getElementById(_this.getHighlightedItemId());\n      highlightedItemNode && highlightedItemNode.click();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"open\", function (event) {\n      if (_this.isControlled('isOpen')) {\n        _this.openActions(event);\n      } else {\n        _this.setState(function () {\n          return {\n            isOpen: true\n          };\n        }, function () {\n          _this.openActions(event);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openActions\", function (event) {\n      _this.scrollHighlightedItemIntoViewIfNeeded();\n\n      _this.props.onOpen && _this.props.onOpen(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"close\", function (event) {\n      if (!_this.isControlled('highlightedIndex')) {\n        _this.setState({\n          highlightedIndex: null\n        });\n      }\n\n      if (_this.isControlled('isOpen')) {\n        _this.closeActions(event);\n      } else {\n        _this.setState(function () {\n          return {\n            isOpen: false\n          };\n        }, function () {\n          _this.closeActions(event);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closeActions\", function (event) {\n      _this.props.onClose && _this.props.onClose(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onItemClick\", function (event) {\n      _this.close(event);\n\n      _this.focusTrigger();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"focusTrigger\", function () {\n      var node = _this.dropdownTrigger;\n\n      if (!node) {\n        return;\n      }\n\n      var element = node instanceof HTMLButtonElement || node.getAttribute('role') === 'button' ? node : node.firstChild instanceof HTMLElement ? node.firstChild : null;\n      element && element.focus();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isControlled\", function (prop) {\n      return _this.props.hasOwnProperty(prop);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getControllableValue\", function (key) {\n      return _this.isControlled(key) ? _this.props[key] : _this.state[key];\n    });\n\n    return _this;\n  }\n\n  var _proto = Dropdown.prototype;\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        children = _this$props3.children,\n        data = _this$props3.data,\n        ignoreItem = _this$props3.item,\n        ignoreMenu = _this$props3.menu,\n        restProps = _objectWithoutPropertiesLoose(_this$props3, [\"children\", \"data\", \"item\", \"menu\"]);\n\n    var isOpen = this.getControllableValue('isOpen');\n\n    var rootProps = _objectSpread({}, restProps, {\n      id: this.id,\n      isOpen: isOpen,\n      onClose: this.close,\n      onOpen: this.open,\n      content: this.renderContent,\n      triggerRef: this.setTriggerRef\n    });\n\n    this.items = this.getItems(data);\n    return (0, _core.jsx)(_Popover.default, rootProps, (0, _utils.isRenderProp)(children) ? this.renderTrigger : this.renderTrigger());\n  };\n\n  return Dropdown;\n}(_react.Component);\n\nexports.default = Dropdown;\n\n_defineProperty(Dropdown, \"displayName\", 'Dropdown');\n\n_defineProperty(Dropdown, \"defaultProps\", {\n  itemKey: 'text',\n  placement: _constants.PLACEMENT['bottom-start']\n});\n\nDropdown.propTypes = process.env.NODE_ENV !== \"production\" ? _propTypes.dropdownPropTypes : {};","map":null,"metadata":{},"sourceType":"script"}